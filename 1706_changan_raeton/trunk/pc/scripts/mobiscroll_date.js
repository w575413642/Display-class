!function(e){function t(t,i){function n(t){if(e.isArray(de.readonly)){var i=e(".dwwl",B).index(t);return de.readonly[i]}return de.readonly}function s(e){var t,i='<div class="dw-bf">',n=1;for(t in oe[e])n%20==0&&(i+='</div><div class="dw-bf">'),i+='<div class="dw-li dw-v" data-val="'+t+'" style="height:'+_+"px;line-height:"+_+'px;"><div class="dw-i">'+oe[e][t]+"</div></div>",n++;return i+="</div>"}function l(t){h=e(".dw-li",t).index(e(".dw-v",t).eq(0)),w=e(".dw-li",t).index(e(".dw-v",t).eq(-1)),m=e(".dw-ul",B).index(t),u=_,v=ie}function r(e){var t=de.headerText;return t?"function"==typeof t?t.call(se,e):t.replace(/\{value\}/i,e):""}function k(){ie.temp=ue&&null!==ie.val&&ie.val!=ae.val()||null===ie.values?de.parseValue(ae.val()||"",ie):ie.values.slice(0),ie.setValue(!0)}function S(t,i,n,s,a){A("validate",[B,i,t])!==!1&&(e(".dw-ul",B).each(function(n){var d=e(this),l=e('.dw-li[data-val="'+ie.temp[n]+'"]',d),o=e(".dw-li",d),r=o.index(l),c=o.length,u=n==i||void 0===i;if(!l.hasClass("dw-v")){for(var h=l,w=l,v=0,f=0;r-v>=0&&!h.hasClass("dw-v");)v++,h=o.eq(r-v);for(;r+f<c&&!w.hasClass("dw-v");)f++,w=o.eq(r+f);(f<v&&f&&2!==s||!v||r-v<0||1==s)&&w.hasClass("dw-v")?(l=w,r+=f):(l=h,r-=v)}l.hasClass("dw-sel")&&!u||(ie.temp[n]=l.attr("data-val"),e(".dw-sel",d).removeClass("dw-sel"),l.addClass("dw-sel"),ie.scroll(d,n,r,u?t:.1,u?a:void 0))}),ie.change(n))}function W(t){if(!("inline"==de.display||Q===e(window).width()&&G===e(window).height()&&t)){var i,n,s,a,d,l,o,r,c,u,h,w,v=0,f=0,p=e(window).scrollTop(),b=e(".dwwr",B),m=e(".dw",B),g={},y=void 0===de.anchor?ae:de.anchor;Q=e(window).width(),G=e(window).height(),U=window.innerHeight,U=U||G,/modal|bubble/.test(de.display)&&(e(".dwc",B).each(function(){i=e(this).outerWidth(!0),v+=i,f=i>f?i:f}),i=v>Q?f:v,b.width(i)),J=m.outerWidth(),K=m.outerHeight(!0),"modal"==de.display?(n=(Q-J)/2,s=p+(U-K)/2):"bubble"==de.display?(w=!0,c=e(".dw-arrw-i",B),l=y.offset(),o=l.top,r=l.left,a=y.outerWidth(),d=y.outerHeight(),n=r-(m.outerWidth(!0)-a)/2,n=n>Q-J?Q-(J+20):n,n=n>=0?n:20,s=o-K,s<p||o>p+U?(m.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),s=o+d):m.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),u=c.outerWidth(),h=r+a/2-(n+(J-u)/2),e(".dw-arr",B).css({left:h>u?u:h})):(g.width="100%","top"==de.display?s=p:"bottom"==de.display&&(s=p+U-K)),g.top=s<0?0:s,g.left=n,m.css(g),e(".dw-persp",B).height(0).height(s+K>e(document).height()?s+K:e(document).height()),w&&(s+K>p+U||o>p+U)&&e(window).scrollTop(s+K-U)}}function z(e){if("touchstart"===e.type)D=!0,setTimeout(function(){D=!1},500);else if(D)return D=!1,!1;return!0}function A(t,n){var s;return n.push(ie),e.each([ee.defaults,le,i],function(e,i){i[t]&&(s=i[t].apply(se,n))}),s}function R(e){var t=+e.data("pos"),i=t+1;o(e,i>w?h:i,1,!0)}function Y(e){var t=+e.data("pos"),i=t-1;o(e,i<h?w:i,2,!0)}var E,_,X,B,Q,U,G,J,K,Z,$,ee,te,ie=this,ne=e.mobiscroll,se=t,ae=e(se),de=q({},j),le={},oe=[],re={},ce={},ue=ae.is("input"),he=!1;ie.enable=function(){de.disabled=!1,ue&&ae.prop("disabled",!1)},ie.disable=function(){de.disabled=!0,ue&&ae.prop("disabled",!0)},ie.scroll=function(e,t,i,n,s){function a(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t}function d(){clearInterval(re[t]),delete re[t],e.data("pos",i).closest(".dwwl").removeClass("dwa")}var l,o=(E-i)*_;o==ce[t]&&re[t]||(n&&o!=ce[t]&&A("onAnimStart",[B,t,n]),ce[t]=o,e.attr("style",P+"-transition:all "+(n?n.toFixed(3):0)+"s ease-out;"+(I?P+"-transform:translate3d(0,"+o+"px,0);":"top:"+o+"px;")),re[t]&&d(),n&&void 0!==s?(l=0,e.closest(".dwwl").addClass("dwa"),re[t]=setInterval(function(){l+=.1,e.data("pos",Math.round(a(l,s,i-s,n))),l>=n&&d()},100)):e.data("pos",i))},ie.setValue=function(t,i,n,s){e.isArray(ie.temp)||(ie.temp=de.parseValue(ie.temp+"",ie)),he&&t&&S(n),X=de.formatResult(ie.temp),s||(ie.values=ie.temp.slice(0),ie.val=X),i&&ue&&ae.val(X).trigger("change")},ie.getValues=function(){var e,t=[];for(e in ie._selectedValues)t.push(ie._selectedValues[e]);return t},ie.validate=function(e,t,i,n){S(i,e,!0,t,n)},ie.change=function(t){X=de.formatResult(ie.temp),"inline"==de.display?ie.setValue(!1,t):e(".dwv",B).html(r(X)),t&&A("onChange",[X])},ie.changeWheel=function(t,i){if(B){var n,a,d=0,l=t.length;for(n in de.wheels)for(a in de.wheels[n]){if(e.inArray(d,t)>-1&&(oe[d]=de.wheels[n][a],e(".dw-ul",B).eq(d).html(s(d)),l--,!l))return W(),void S(i,void 0,!0);d++}}},ie.isVisible=function(){return he},ie.tap=function(e,t){var i,n;de.tap&&e.bind("touchstart",function(e){e.preventDefault(),i=a(e,"X"),n=a(e,"Y")}).bind("touchend",function(e){Math.abs(a(e,"X")-i)<20&&Math.abs(a(e,"Y")-n)<20&&t.call(this,e),M=!0,setTimeout(function(){M=!1},300)}),e.bind("click",function(e){M||t.call(this,e)})},ie.show=function(t){if(de.disabled||he)return!1;"top"==de.display&&(Z="slidedown"),"bottom"==de.display&&(Z="slideup"),k(),A("onBeforeShow",[B]);var i,d,r=0,u="";Z&&!t&&(u="dw-"+Z+" dw-in");var h='<div class="dw-trans '+de.theme+" dw-"+de.display+'">'+("inline"==de.display?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+u+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(de.headerText?'<div class="dwv"></div>':""));for(i=0;i<de.wheels.length;i++){h+='<div class="dwc'+("scroller"!=de.mode?" dwpm":" dwsc")+(de.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(d in de.wheels[i])oe[r]=de.wheels[i][d],h+='<td><div class="dwwl dwrc dwwl'+r+'">'+("scroller"!=de.mode?'<div class="dwwb dwwbp" style="height:'+_+"px;line-height:"+_+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+_+"px;line-height:"+_+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+d+'</div><div class="dww" style="height:'+de.rows*_+"px;min-width:"+de.width+'px;"><div class="dw-ul">',h+=s(r),h+='</div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',r++;h+="</tr></table></div></div>"}h+=("inline"!=de.display?'<div class="dwbc'+(de.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+de.setText+"</span></span>"+(de.button3?'<span class="dwbw dwb-n"><span class="dwb">'+de.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+de.cancelText+"</span></span></div></div>":'<div class="dwcc"></div>')+"</div></div></div>",B=e(h),S(),A("onMarkupReady",[B]),"inline"!=de.display?(B.appendTo("body"),setTimeout(function(){B.removeClass("dw-trans").find(".dw").removeClass(u)},350)):ae.is("div")?ae.html(B):B.insertAfter(ae),A("onMarkupInserted",[B]),he=!0,ee.init(B,ie),"inline"!=de.display&&(ie.tap(e(".dwb-s span",B),function(){ie.hide(!1,"set")!==!1&&(ie.setValue(!1,!0),A("onSelect",[ie.val]))}),ie.tap(e(".dwb-c span",B),function(){ie.cancel()}),de.button3&&ie.tap(e(".dwb-n span",B),de.button3),de.scrollLock&&B.bind("touchmove",function(e){K<=U&&J<=Q&&e.preventDefault()}),e("input,select,button").each(function(){e(this).prop("disabled")||e(this).addClass("dwtd").prop("disabled",!0)}),W(),e(window).bind("resize.dw",function(){clearTimeout($),$=setTimeout(function(){W(!0)},100)})),B.delegate(".dwwl","DOMMouseScroll mousewheel",function(t){if(!n(this)){t.preventDefault(),t=t.originalEvent;var i=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,s=e(".dw-ul",this),a=+s.data("pos"),d=Math.round(a-i);l(s),o(s,d,i<0?1:2)}}).delegate(".dwb, .dwwb",H,function(t){e(this).addClass("dwb-a")}).delegate(".dwwb",H,function(t){t.stopPropagation(),t.preventDefault();var i=e(this).closest(".dwwl");if(z(t)&&!n(i)&&!i.hasClass("dwa")){p=!0;var s=i.find(".dw-ul"),a=e(this).hasClass("dwwbp")?R:Y;l(s),clearInterval(c),c=setInterval(function(){a(s)},de.delay),a(s)}}).delegate(".dwwl",H,function(t){t.preventDefault(),!z(t)||f||n(this)||p||(f=!0,e(document).bind(L,F),b=e(".dw-ul",this),V="clickpick"!=de.mode,T=+b.data("pos"),l(b),C=void 0!==re[m],g=a(t,"Y"),x=new Date,y=g,ie.scroll(b,m,T,.001),V&&b.closest(".dwwl").addClass("dwa"))}),A("onShow",[B,X])},ie.hide=function(t,i){return!(!he||A("onClose",[X,i])===!1)&&(e(".dwtd").prop("disabled",!1).removeClass("dwtd"),ae.blur(),void(B&&("inline"!=de.display&&Z&&!t?(B.addClass("dw-trans").find(".dw").addClass("dw-"+Z+" dw-out"),setTimeout(function(){B.remove(),B=null},350)):(B.remove(),B=null),he=!1,ce={},e(window).unbind(".dw"))))},ie.cancel=function(){ie.hide(!1,"cancel")!==!1&&A("onCancel",[ie.val])},ie.init=function(e){ee=q({defaults:{},init:O},ne.themes[e.theme||de.theme]),te=ne.i18n[e.lang||de.lang],q(i,e),q(de,ee.defaults,te,i),ie.settings=de,ae.unbind(".dw");var t=ne.presets[de.preset];t&&(le=t.call(se,ie),q(de,le,i),q(N,le.methods)),E=Math.floor(de.rows/2),_=de.height,Z=de.animate,void 0!==ae.data("dwro")&&(se.readOnly=d(ae.data("dwro"))),he&&ie.hide(),"inline"==de.display?ie.show():(k(),ue&&de.showOnFocus&&(ae.data("dwro",se.readOnly),se.readOnly=!0,ae.bind("focus.dw",function(){ie.show()})))},ie.trigger=function(e,t){return A(e,t)},ie.values=null,ie.val=null,ie.temp=null,ie._selectedValues={},ie.init(i)}function i(e){var t;for(t in e)if(void 0!==z[e[t]])return!0;return!1}function n(){var e,t=["Webkit","Moz","O","ms"];for(e in t)if(i([t[e]+"Transform"]))return"-"+t[e].toLowerCase();return""}function s(e){return k[e.id]}function a(e,t){var i=e.originalEvent,n=e.changedTouches;return n||i&&i.changedTouches?i?i.changedTouches[0]["page"+t]:n[0]["page"+t]:e["page"+t]}function d(e){return e===!0||"true"==e}function l(e,t,i){return e=e>i?i:e,e=e<t?t:e}function o(t,i,n,s,a){i=l(i,h,w);var d=e(".dw-li",t).eq(i),o=void 0===a?i:a,r=m,c=s?i==o?.1:Math.abs(.1*(i-o)):0;v.temp[r]=d.attr("data-val"),v.scroll(t,r,i,c,a),setTimeout(function(){v.validate(r,n,c,a)},10)}function r(e,t,i){return N[t]?N[t].apply(e,Array.prototype.slice.call(i,1)):"object"==typeof t?N.init.call(e,t):e}var c,u,h,w,v,f,p,b,m,g,y,x,T,C,V,M,D,k={},O=function(){},S=new Date,W=S.getTime(),z=document.createElement("modernizr").style,I=i(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),P=n(),q=e.extend,H="touchstart mousedown",L="touchmove mousemove",A="touchend mouseup",F=function(e){V&&(e.preventDefault(),y=a(e,"Y"),v.scroll(b,m,l(T+(g-y)/u,h-1,w+1))),C=!0},j={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,tap:!0,formatResult:function(e){return e.join(" ")},parseValue:function(e,t){var i,n,s,a=t.settings.wheels,d=e.split(" "),l=[],o=0;for(i=0;i<a.length;i++)for(n in a[i]){if(void 0!==a[i][n][d[o]])l.push(d[o]);else for(s in a[i][n]){l.push(s);break}o++}return l}},N={init:function(e){return void 0===e&&(e={}),this.each(function(){this.id||(W+=1,this.id="scoller"+W),k[this.id]=new t(this,e)})},enable:function(){return this.each(function(){var e=s(this);e&&e.enable()})},disable:function(){return this.each(function(){var e=s(this);e&&e.disable()})},isDisabled:function(){var e=s(this[0]);if(e)return e.settings.disabled},isVisible:function(){var e=s(this[0]);if(e)return e.isVisible()},option:function(e,t){return this.each(function(){var i=s(this);if(i){var n={};"object"==typeof e?n=e:n[e]=t,i.init(n)}})},setValue:function(e,t,i,n){return this.each(function(){var a=s(this);a&&(a.temp=e,a.setValue(!0,t,i,n))})},getInst:function(){return s(this[0])},getValue:function(){var e=s(this[0]);if(e)return e.values},getValues:function(){var e=s(this[0]);if(e)return e.getValues()},show:function(){var e=s(this[0]);if(e)return e.show()},hide:function(){return this.each(function(){var e=s(this);e&&e.hide()})},destroy:function(){return this.each(function(){var t=s(this);t&&(t.hide(),e(this).unbind(".dw"),delete k[this.id],e(this).is("input")&&(this.readOnly=d(e(this).data("dwro"))))})}};e(document).bind(A,function(t){if(f){var i,n,s,a=new Date-x,d=l(T+(g-y)/u,h-1,w+1),r=b.offset().top;if(a<300?(i=(y-g)/a,n=i*i/.0012,y-g<0&&(n=-n)):n=y-g,s=Math.round(T-n/u),!n&&!C){var m=Math.floor((y-r)/u),M=e(".dw-li",b).eq(m),D=V;v.trigger("onValueTap",[M])!==!1?s=m:D=!0,D&&(M.addClass("dw-hl"),setTimeout(function(){M.removeClass("dw-hl")},200))}V&&o(b,s,0,!0,Math.round(d)),f=!1,b=null,e(document).unbind(L,F)}p&&(clearInterval(c),p=!1),e(".dwb-a").removeClass("dwb-a")}).bind("mouseover mouseup mousedown click",function(e){if(M)return e.stopPropagation(),e.preventDefault(),!1}),e.fn.mobiscroll=function(t){return q(this,e.mobiscroll.shorts),r(this,t,arguments)},e.mobiscroll=e.mobiscroll||{setDefaults:function(e){q(j,e)},presetShort:function(e){this.shorts[e]=function(t){return r(this,q(t,{preset:e}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}},e.scroller=e.scroller||e.mobiscroll,e.fn.scroller=e.fn.scroller||e.fn.mobiscroll,e.mobiscroll.i18n.zh=e.extend(e.mobiscroll.i18n.zh,{dateFormat:"yyyy-mm-dd",dateOrder:"yymmdd",dayNames:["周日","周一;","周二;","周三","周四","周五","周六"],dayNamesShort:["日","一","二","三","四","五","六"],dayText:"日",hourText:"时",minuteText:"分",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthText:"月",secText:"秒",timeFormat:"HH:ii",timeWheels:"HHii",yearText:"年"}),e.mobiscroll.i18n.zh=e.extend(e.mobiscroll.i18n.zh,{setText:"确定",cancelText:"取消"});var R={defaults:{dateOrder:"Mddyy",mode:"mixed",rows:5,width:70,height:36,showLabel:!0,useShortLabels:!0}};e.mobiscroll.themes["android-ics"]=R,e.mobiscroll.themes["android-ics light"]=R}(jQuery);